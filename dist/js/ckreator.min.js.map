{"version":3,"sources":["app.js","constants.js","directory-list.js","files-api.js","menu-bar.js","projects-api.js","projects-new-dialogue.js","projects-open-dialogue.js","projects-pane.js","viewport-frame.js"],"names":["ckreator","config","$routeProvider","$locationProvider","when","template","controller","otherwise","redirectTo","html5Mode","angular","module","constant","api","frameworks","viewportUrl","directive","filesApi","restrict","link","scope","element","service","$http","CONF","self","getFiles","path","get","params","projectsApi","items","Projects","options","New","newProjectDialogueOpen","Open","openProjectDialogueOpen","$watch","project","newVal","oldVal","Stop","Start","startProject","stopProject","running","$q","$localStorage","url","projects","loadingMessage","loadFromStorage","getProjects","defer","then","res","data","resolve","promise","newProject","post","console","log","p","name","reject","openProject","$sce","$timeout","trustAsResourceUrl"],"mappings":"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","file":"ckreator.min.js","sourcesContent":["(function(ckreator){\n\t'use strict';\n\tckreator.config(function ($routeProvider, $locationProvider) {\n\t\t$routeProvider\n\t\t.when('/', {\n\t\t\ttemplateUrl: \"../html/main.html\",\n\t\t\tcontroller: 'CKreatorCtlr',\n\t\t})\n\t\t.otherwise({ redirectTo: '/' });\n\t\t$locationProvider.html5Mode(true);\n\t});\n\n\tckreator.controller('CKreatorCtlr', function(){\n\t\tvar self = this;\n\t});\n})(angular.module('ckreator', [\n\t'ngResource',\n\t'ngSanitize',\n\t'ngRoute',\n\t'utility_module',\n\t'ngStorage'\n]));\n","(function(ckreator){\n\t'use strict';\n\tckreator.constant('CONF', {\n\t\t'api': 'http://localhost:8601/',\n\t\t'frameworks': ['AngularJs'],\n\t\t'viewportUrl': 'http://localhost:5555'\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('directoryList', function(filesApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '../html/directory-list.html',\n\t\t\tlink: function(scope, element){\n\t\t\t\t// apiService.getFiles('api/').then(function(res){\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// \t//scope.directory = res.data;\n\t\t\t\t// }, function(res){\n\t\t\t\t// \t/* TODO error handle */\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// });\n\n\t\t\t\t// filesApi.getProjects().then(function(res){\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// \tscope.directory = res.data;\n\t\t\t\t// }, function(res){\n\t\t\t\t// \t/* TODO error handle */\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// });\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.service('filesApi', function($http, CONF){\n\t\tvar self = {\n\t\t\tgetFiles: function(path){\n\t\t\t\treturn $http.get(CONF.api + 'files', {params:{path:path}});\n\t\t\t}\n\t\t};\n\n\t\treturn self;\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('menuBar', function(CONF, projectsApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope:{},\n\t\t\ttemplateUrl: '../html/menu-bar.html',\n\t\t\tlink: function(scope, element){\n\t\t\t\tscope.items = {\n\t\t\t\t\tProjects: {\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tNew: function() { projectsApi.newProjectDialogueOpen = true; },\n\t\t\t\t\t\t\tOpen: function() { projectsApi.openProjectDialogueOpen = true; }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tscope.$watch(function(){\n\t\t\t\t\treturn projectsApi.project ? projectsApi.project.path : false;\n\t\t\t\t}, function(newVal, oldVal){\n\t\t\t\t\tif(newVal && newVal !== oldVal){\n\t\t\t\t\t\tdelete scope.items.Projects.options.Stop;\n\t\t\t\t\t\tscope.items.Projects.options.Start = function(){ projectsApi.startProject(); };\n\t\t\t\t\t}else if(newVal !== oldVal){\n\t\t\t\t\t\tdelete scope.items.Projects.options.Start;\n\t\t\t\t\t\tscope.items.Projects.options.Stop = function(){ projectsApi.stopProject(); };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tscope.$watch(function(){\n\t\t\t\t\treturn projectsApi.project ? projectsApi.project.running : false;\n\t\t\t\t}, function(newVal, oldVal){\n\t\t\t\t\tif(newVal && newVal !== oldVal){\n\t\t\t\t\t\tdelete scope.items.Projects.options.Start;\n\t\t\t\t\t\tscope.items.Projects.options.Stop = function(){ projectsApi.stopProject(); };\n\t\t\t\t\t}else if(newVal !== oldVal){\n\t\t\t\t\t\tdelete scope.items.Projects.options.Stop;\n\t\t\t\t\t\tscope.items.Projects.options.Start = function(){ projectsApi.startProject(); };\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.service('projectsApi', function($http, $q, $localStorage, CONF){\n\t\tvar self = {\n\t\t\turl: CONF.viewportUrl,\n\t\t\tproject: {},\n\t\t\tprojects: {},\n\t\t\tnewProjectDialogueOpen: false,\n\t\t\topenProjectDialogueOpen: false,\n\t\t\tloadingMessage: null,\n\n\t\t\tloadFromStorage: function(){\n\t\t\t\tself.project = $localStorage.project;\n\t\t\t},\n\n\t\t\tgetProjects: function(){\n\t\t\t\tvar defer = $q.defer();\n\n\t\t\t\t$http.get(CONF.api + 'projects').then(function(res){\n\n\t\t\t\t\tself.projects = res.data;\n\t\t\t\t\tdefer.resolve(self.projects);\n\n\t\t\t\t}, function(res){});\n\n\t\t\t\treturn defer.promise;\n\t\t\t},\n\n\t\t\tnewProject: function(project){\n\t\t\t\tvar defer = $q.defer();\n\n\t\t\t\tself.loadingMessage = 'Creating project';\n\n\t\t\t\t$http.post(CONF.api + 'projects', project).then(function(res){\n\t\t\t\t\tconsole.log('s', res);\n\t\t\t\t\tself.loadingMessage = null;\n\t\t\t\t\tself.newProjectDialogueOpen = false;\n\n\t\t\t\t\tself.getProjects().then(function(res){\n\t\t\t\t\t\tfor(var p in res.data){\n\t\t\t\t\t\t\tif(p === project.name){\n\t\t\t\t\t\t\t\tself.project = res.data[p];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdefer.resolve(self.project);\n\t\t\t\t\t});\n\n\t\t\t\t}, function(res){\n\t\t\t\t\tself.loadingMessage = 'There was an error creating your project, please try again';\n\t\t\t\t\tconsole.log('f',res);\n\t\t\t\t\tdefer.reject(res.data);\n\t\t\t\t});\n\n\t\t\t\treturn defer.promise;\n\t\t\t},\n\n\t\t\topenProject: function(project){\n\t\t\t\tconsole.log(project);\n\t\t\t\tself.project = project;\n\t\t\t\tself.openProjectDialogueOpen = false;\n\t\t\t},\n\n\t\t\tstartProject: function(){\n\t\t\t\tvar defer = $q.defer();\n\n\t\t\t\t$http.get(CONF.api + 'projects/start', {params:{project: self.project.name}}).then(function(res){\n\t\t\t\t\tself.project.running = true;\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t}, function(res){\n\t\t\t\t\tself.project.running = false;\n\t\t\t\t\tdefer.reject(res);\n\t\t\t\t});\n\n\t\t\t\treturn defer.promise;\n\t\t\t},\n\n\t\t\tstopProject: function(){\n\t\t\t\tvar defer = $q.defer();\n\n\t\t\t\t$http.get(CONF.api + 'projects/stop', {params:{project: self.project.name}}).then(function(res){\n\t\t\t\t\tself.project.running = false;\n\t\t\t\t\tdefer.resolve(res);\n\t\t\t\t}, function(res){\n\t\t\t\t\tdefer.reject(res);\n\t\t\t\t});\n\n\t\t\t\treturn defer.promise;\n\t\t\t}\n\t\t};\n\n\t\treturn self;\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('projectsNewDialogue', function(CONF, projectsApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope:{},\n\t\t\ttemplateUrl: '../html/projects-new-dialogue.html',\n\t\t\tlink: function(scope, element){\n\t\t\t\tscope.frameworks = CONF.frameworks;\n\t\t\t\tscope.projectsApi = projectsApi;\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('projectsOpenDialogue', function(CONF, projectsApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope:{},\n\t\t\ttemplateUrl: '../html/projects-open-dialogue.html',\n\t\t\tlink: function(scope, element){\n\t\t\t\tscope.projectsApi = projectsApi;\n\t\t\t\tprojectsApi.getProjects();\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('projectsPane', function(projectsApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '../html/projects-pane.html',\n\t\t\tlink: function(scope, element){\n\t\t\t\t// apiService.getFiles('api/').then(function(res){\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// \t//scope.directory = res.data;\n\t\t\t\t// }, function(res){\n\t\t\t\t// \t/* TODO error handle */\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// });\n\n\t\t\t\t// filesApi.getProjects().then(function(res){\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// \tscope.directory = res.data;\n\t\t\t\t// }, function(res){\n\t\t\t\t// \t/* TODO error handle */\n\t\t\t\t// \tconsole.log(res);\n\t\t\t\t// });\n\n\t\t\t\tscope.projectsApi = projectsApi;\n\n\t\t\t\tprojectsApi.loadFromStorage();\n\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n","(function(ckreator){\n\t'use strict';\n\n\tckreator.directive('viewportFrame', function($sce, $http, $timeout, CONF, projectsApi){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope:{},\n\t\t\ttemplateUrl: '../html/viewport-frame.html',\n\t\t\tlink: function(scope, element){\n\n\t\t\t\tscope.projectsApi = projectsApi;\n\n\t\t\t\tscope.$watch(function(){\n\t\t\t\t\treturn projectsApi.project ? projectsApi.project.running : false;\n\t\t\t\t}, function(newVal, oldVal){\n\n\t\t\t\t\tif(newVal && newVal !== oldVal){\n\t\t\t\t\t\tif(newVal){\n\t\t\t\t\t\t\tscope.url = $sce.trustAsResourceUrl(projectsApi.url);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tscope.url = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n})(angular.module('ckreator'));\n"],"sourceRoot":"/source/"}